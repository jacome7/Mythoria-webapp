{
  "id": "fad2152c-cc7b-4a28-bba0-7a870ab1477b",
  "prevId": "56fc47ac-4b37-49d5-8012-3fb042bb4079",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.addresses": {
      "name": "addresses",
      "schema": "",
      "columns": {
        "address_id": {
          "name": "address_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "author_id": {
          "name": "author_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "address_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "line1": {
          "name": "line1",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "line2": {
          "name": "line2",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "city": {
          "name": "city",
          "type": "varchar(120)",
          "primaryKey": false,
          "notNull": true
        },
        "state_region": {
          "name": "state_region",
          "type": "varchar(120)",
          "primaryKey": false,
          "notNull": false
        },
        "postal_code": {
          "name": "postal_code",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "country": {
          "name": "country",
          "type": "varchar(2)",
          "primaryKey": false,
          "notNull": true
        },
        "phone": {
          "name": "phone",
          "type": "varchar(30)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "addresses_author_id_idx": {
          "name": "addresses_author_id_idx",
          "columns": [
            {
              "expression": "author_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "addresses_type_idx": {
          "name": "addresses_type_idx",
          "columns": [
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "addresses_author_id_authors_author_id_fk": {
          "name": "addresses_author_id_authors_author_id_fk",
          "tableFrom": "addresses",
          "tableTo": "authors",
          "columnsFrom": [
            "author_id"
          ],
          "columnsTo": [
            "author_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.authors": {
      "name": "authors",
      "schema": "",
      "columns": {
        "author_id": {
          "name": "author_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "clerk_user_id": {
          "name": "clerk_user_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "display_name": {
          "name": "display_name",
          "type": "varchar(120)",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "fiscal_number": {
          "name": "fiscal_number",
          "type": "varchar(40)",
          "primaryKey": false,
          "notNull": false
        },
        "mobile_phone": {
          "name": "mobile_phone",
          "type": "varchar(30)",
          "primaryKey": false,
          "notNull": false
        },
        "last_login_at": {
          "name": "last_login_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "preferred_locale": {
          "name": "preferred_locale",
          "type": "varchar(5)",
          "primaryKey": false,
          "notNull": false,
          "default": "'en'"
        },
        "gender": {
          "name": "gender",
          "type": "gender",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "literary_age": {
          "name": "literary_age",
          "type": "literary_age",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "primary_goals": {
          "name": "primary_goals",
          "type": "primary_goal[]",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::primary_goal[]"
        },
        "primary_goal_other": {
          "name": "primary_goal_other",
          "type": "varchar(160)",
          "primaryKey": false,
          "notNull": false
        },
        "audiences": {
          "name": "audiences",
          "type": "audience_for_stories[]",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::audience_for_stories[]"
        },
        "interests": {
          "name": "interests",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::text[]"
        },
        "notification_preference": {
          "name": "notification_preference",
          "type": "notification_preference",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'inspiration'"
        },
        "welcome_email_sent_at": {
          "name": "welcome_email_sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "authors_clerk_user_id_idx": {
          "name": "authors_clerk_user_id_idx",
          "columns": [
            {
              "expression": "clerk_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "authors_email_idx": {
          "name": "authors_email_idx",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "authors_last_login_at_idx": {
          "name": "authors_last_login_at_idx",
          "columns": [
            {
              "expression": "last_login_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "authors_created_at_idx": {
          "name": "authors_created_at_idx",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "authors_clerk_user_id_unique": {
          "name": "authors_clerk_user_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "clerk_user_id"
          ]
        },
        "authors_email_unique": {
          "name": "authors_email_unique",
          "nullsNotDistinct": false,
          "columns": [
            "email"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.events": {
      "name": "events",
      "schema": "",
      "columns": {
        "event_id": {
          "name": "event_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "author_id": {
          "name": "author_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "event_type": {
          "name": "event_type",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "payload": {
          "name": "payload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "events_author_id_idx": {
          "name": "events_author_id_idx",
          "columns": [
            {
              "expression": "author_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "events_event_type_idx": {
          "name": "events_event_type_idx",
          "columns": [
            {
              "expression": "event_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "events_created_at_idx": {
          "name": "events_created_at_idx",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "events_author_id_authors_author_id_fk": {
          "name": "events_author_id_authors_author_id_fk",
          "tableFrom": "events",
          "tableTo": "authors",
          "columnsFrom": [
            "author_id"
          ],
          "columnsTo": [
            "author_id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.chapters": {
      "name": "chapters",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "author_id": {
          "name": "author_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "chapter_number": {
          "name": "chapter_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "image_uri": {
          "name": "image_uri",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "image_thumbnail_uri": {
          "name": "image_thumbnail_uri",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "html_content": {
          "name": "html_content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "audio_uri": {
          "name": "audio_uri",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "chapters_id_idx": {
          "name": "chapters_id_idx",
          "columns": [
            {
              "expression": "id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "chapters_story_id_idx": {
          "name": "chapters_story_id_idx",
          "columns": [
            {
              "expression": "story_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "chapters_version_idx": {
          "name": "chapters_version_idx",
          "columns": [
            {
              "expression": "version",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "chapters_chapter_number_idx": {
          "name": "chapters_chapter_number_idx",
          "columns": [
            {
              "expression": "chapter_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "chapters_story_id_version_idx": {
          "name": "chapters_story_id_version_idx",
          "columns": [
            {
              "expression": "story_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "version",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "chapters_story_id_chapter_number_version_idx": {
          "name": "chapters_story_id_chapter_number_version_idx",
          "columns": [
            {
              "expression": "story_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "chapter_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "version",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "chapters_story_id_stories_story_id_fk": {
          "name": "chapters_story_id_stories_story_id_fk",
          "tableFrom": "chapters",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "story_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "chapters_author_id_authors_author_id_fk": {
          "name": "chapters_author_id_authors_author_id_fk",
          "tableFrom": "chapters",
          "tableTo": "authors",
          "columnsFrom": [
            "author_id"
          ],
          "columnsTo": [
            "author_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.share_links": {
      "name": "share_links",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "access_level": {
          "name": "access_level",
          "type": "access_level",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "revoked": {
          "name": "revoked",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "share_links_story_id_idx": {
          "name": "share_links_story_id_idx",
          "columns": [
            {
              "expression": "story_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "share_links_expires_at_idx": {
          "name": "share_links_expires_at_idx",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "share_links_revoked_idx": {
          "name": "share_links_revoked_idx",
          "columns": [
            {
              "expression": "revoked",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "share_links_story_id_stories_story_id_fk": {
          "name": "share_links_story_id_stories_story_id_fk",
          "tableFrom": "share_links",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "story_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.stories": {
      "name": "stories",
      "schema": "",
      "columns": {
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "author_id": {
          "name": "author_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "plot_description": {
          "name": "plot_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "story_language": {
          "name": "story_language",
          "type": "varchar(5)",
          "primaryKey": false,
          "notNull": true,
          "default": "'en-US'"
        },
        "synopsis": {
          "name": "synopsis",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "place": {
          "name": "place",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "additionalRequests": {
          "name": "additionalRequests",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "image_generation_instructions": {
          "name": "image_generation_instructions",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "target_audience": {
          "name": "target_audience",
          "type": "target_audience",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "novel_style": {
          "name": "novel_style",
          "type": "novel_style",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "graphical_style": {
          "name": "graphical_style",
          "type": "graphical_style",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "literary_persona": {
          "name": "literary_persona",
          "type": "literary_persona",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "story_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'draft'"
        },
        "features": {
          "name": "features",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "delivery_address": {
          "name": "delivery_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "custom_author": {
          "name": "custom_author",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "dedication_message": {
          "name": "dedication_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "audiobook_uri": {
          "name": "audiobook_uri",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "audiobook_status": {
          "name": "audiobook_status",
          "type": "audiobook_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "cover_uri": {
          "name": "cover_uri",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "backcover_uri": {
          "name": "backcover_uri",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "has_audio": {
          "name": "has_audio",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "interior_pdf_uri": {
          "name": "interior_pdf_uri",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cover_pdf_uri": {
          "name": "cover_pdf_uri",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_public": {
          "name": "is_public",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "is_featured": {
          "name": "is_featured",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "feature_image_uri": {
          "name": "feature_image_uri",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "chapter_count": {
          "name": "chapter_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 6
        },
        "story_generation_status": {
          "name": "story_generation_status",
          "type": "run_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "story_generation_completed_percentage": {
          "name": "story_generation_completed_percentage",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "stories_status_idx": {
          "name": "stories_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "stories_status_created_at_idx": {
          "name": "stories_status_created_at_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "stories_author_id_updated_at_idx": {
          "name": "stories_author_id_updated_at_idx",
          "columns": [
            {
              "expression": "author_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "updated_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "stories_author_id_created_at_idx": {
          "name": "stories_author_id_created_at_idx",
          "columns": [
            {
              "expression": "author_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "stories_author_id_status_idx": {
          "name": "stories_author_id_status_idx",
          "columns": [
            {
              "expression": "author_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "stories_is_public_idx": {
          "name": "stories_is_public_idx",
          "columns": [
            {
              "expression": "is_public",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"stories\".\"is_public\" = $1",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "stories_is_featured_idx": {
          "name": "stories_is_featured_idx",
          "columns": [
            {
              "expression": "is_featured",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"stories\".\"is_featured\" = $1",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "stories_slug_idx": {
          "name": "stories_slug_idx",
          "columns": [
            {
              "expression": "slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"stories\".\"slug\" is not null",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "stories_author_id_authors_author_id_fk": {
          "name": "stories_author_id_authors_author_id_fk",
          "tableFrom": "stories",
          "tableTo": "authors",
          "columnsFrom": [
            "author_id"
          ],
          "columnsTo": [
            "author_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.story_collaborators": {
      "name": "story_collaborators",
      "schema": "",
      "columns": {
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "collaborator_role",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "story_collaborators_user_id_idx": {
          "name": "story_collaborators_user_id_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "story_collaborators_story_id_stories_story_id_fk": {
          "name": "story_collaborators_story_id_stories_story_id_fk",
          "tableFrom": "story_collaborators",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "story_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "story_collaborators_user_id_authors_author_id_fk": {
          "name": "story_collaborators_user_id_authors_author_id_fk",
          "tableFrom": "story_collaborators",
          "tableTo": "authors",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "author_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "story_collaborators_story_id_user_id_pk": {
          "name": "story_collaborators_story_id_user_id_pk",
          "columns": [
            "story_id",
            "user_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.story_versions": {
      "name": "story_versions",
      "schema": "",
      "columns": {
        "story_version_id": {
          "name": "story_version_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "version_number": {
          "name": "version_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "text_jsonb": {
          "name": "text_jsonb",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "story_versions_story_id_stories_story_id_fk": {
          "name": "story_versions_story_id_stories_story_id_fk",
          "tableFrom": "story_versions",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "story_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.blog_post_translations": {
      "name": "blog_post_translations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "post_id": {
          "name": "post_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "locale": {
          "name": "locale",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "varchar(160)",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "summary": {
          "name": "summary",
          "type": "varchar(1000)",
          "primaryKey": false,
          "notNull": true
        },
        "content_mdx": {
          "name": "content_mdx",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "blog_post_translations_post_id_blog_posts_id_fk": {
          "name": "blog_post_translations_post_id_blog_posts_id_fk",
          "tableFrom": "blog_post_translations",
          "tableTo": "blog_posts",
          "columnsFrom": [
            "post_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.blog_posts": {
      "name": "blog_posts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "slug_base": {
          "name": "slug_base",
          "type": "varchar(140)",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "blog_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "hero_image_url": {
          "name": "hero_image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "published_at": {
          "name": "published_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "blog_posts_slug_base_unique": {
          "name": "blog_posts_slug_base_unique",
          "nullsNotDistinct": false,
          "columns": [
            "slug_base"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.characters": {
      "name": "characters",
      "schema": "",
      "columns": {
        "character_id": {
          "name": "character_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "author_id": {
          "name": "author_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "varchar(120)",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "role": {
          "name": "role",
          "type": "character_role",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "age": {
          "name": "age",
          "type": "character_age",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "traits": {
          "name": "traits",
          "type": "json",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::json"
        },
        "characteristics": {
          "name": "characteristics",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "physical_description": {
          "name": "physical_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "photo_url": {
          "name": "photo_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "photo_gcs_uri": {
          "name": "photo_gcs_uri",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "characters_author_id_idx": {
          "name": "characters_author_id_idx",
          "columns": [
            {
              "expression": "author_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "characters_created_at_idx": {
          "name": "characters_created_at_idx",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "characters_role_idx": {
          "name": "characters_role_idx",
          "columns": [
            {
              "expression": "role",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "characters_age_idx": {
          "name": "characters_age_idx",
          "columns": [
            {
              "expression": "age",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "characters_author_id_authors_author_id_fk": {
          "name": "characters_author_id_authors_author_id_fk",
          "tableFrom": "characters",
          "tableTo": "authors",
          "columnsFrom": [
            "author_id"
          ],
          "columnsTo": [
            "author_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.story_characters": {
      "name": "story_characters",
      "schema": "",
      "columns": {
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "character_id": {
          "name": "character_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "character_role",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "story_characters_character_id_idx": {
          "name": "story_characters_character_id_idx",
          "columns": [
            {
              "expression": "character_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "story_characters_story_id_stories_story_id_fk": {
          "name": "story_characters_story_id_stories_story_id_fk",
          "tableFrom": "story_characters",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "story_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "story_characters_character_id_characters_character_id_fk": {
          "name": "story_characters_character_id_characters_character_id_fk",
          "tableFrom": "story_characters",
          "tableTo": "characters",
          "columnsFrom": [
            "character_id"
          ],
          "columnsTo": [
            "character_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "story_characters_story_id_character_id_pk": {
          "name": "story_characters_story_id_character_id_pk",
          "columns": [
            "story_id",
            "character_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.credits": {
      "name": "credits",
      "schema": "",
      "columns": {
        "credit_id": {
          "name": "credit_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "author_id": {
          "name": "author_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "balance": {
          "name": "balance",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "last_updated_at": {
          "name": "last_updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "credits_author_id_authors_author_id_fk": {
          "name": "credits_author_id_authors_author_id_fk",
          "tableFrom": "credits",
          "tableTo": "authors",
          "columnsFrom": [
            "author_id"
          ],
          "columnsTo": [
            "author_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.payment_events": {
      "name": "payment_events",
      "schema": "",
      "columns": {
        "event_id": {
          "name": "event_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "event_type": {
          "name": "event_type",
          "type": "payment_event_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "data": {
          "name": "data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "payment_events_order_id_idx": {
          "name": "payment_events_order_id_idx",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "payment_events_event_type_idx": {
          "name": "payment_events_event_type_idx",
          "columns": [
            {
              "expression": "event_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "payment_events_created_at_idx": {
          "name": "payment_events_created_at_idx",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "payment_events_order_id_payment_orders_order_id_fk": {
          "name": "payment_events_order_id_payment_orders_order_id_fk",
          "tableFrom": "payment_events",
          "tableTo": "payment_orders",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "order_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.payment_methods": {
      "name": "payment_methods",
      "schema": "",
      "columns": {
        "payment_method_id": {
          "name": "payment_method_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "author_id": {
          "name": "author_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "provider": {
          "name": "provider",
          "type": "payment_provider",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "provider_ref": {
          "name": "provider_ref",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "brand": {
          "name": "brand",
          "type": "varchar(60)",
          "primaryKey": false,
          "notNull": false
        },
        "last4": {
          "name": "last4",
          "type": "varchar(4)",
          "primaryKey": false,
          "notNull": false
        },
        "exp_month": {
          "name": "exp_month",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "exp_year": {
          "name": "exp_year",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "billing_details": {
          "name": "billing_details",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "is_default": {
          "name": "is_default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "payment_methods_author_id_idx": {
          "name": "payment_methods_author_id_idx",
          "columns": [
            {
              "expression": "author_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "payment_methods_provider_idx": {
          "name": "payment_methods_provider_idx",
          "columns": [
            {
              "expression": "provider",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "payment_methods_is_default_idx": {
          "name": "payment_methods_is_default_idx",
          "columns": [
            {
              "expression": "is_default",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "payment_methods_author_id_authors_author_id_fk": {
          "name": "payment_methods_author_id_authors_author_id_fk",
          "tableFrom": "payment_methods",
          "tableTo": "authors",
          "columnsFrom": [
            "author_id"
          ],
          "columnsTo": [
            "author_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.payment_orders": {
      "name": "payment_orders",
      "schema": "",
      "columns": {
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "author_id": {
          "name": "author_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "currency": {
          "name": "currency",
          "type": "varchar(3)",
          "primaryKey": false,
          "notNull": true,
          "default": "'eur'"
        },
        "status": {
          "name": "status",
          "type": "payment_order_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "provider": {
          "name": "provider",
          "type": "payment_provider",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "provider_order_id": {
          "name": "provider_order_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "provider_public_id": {
          "name": "provider_public_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "credit_bundle": {
          "name": "credit_bundle",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "payment_orders_author_id_idx": {
          "name": "payment_orders_author_id_idx",
          "columns": [
            {
              "expression": "author_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "payment_orders_status_idx": {
          "name": "payment_orders_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "payment_orders_provider_order_id_idx": {
          "name": "payment_orders_provider_order_id_idx",
          "columns": [
            {
              "expression": "provider_order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "payment_orders_created_at_idx": {
          "name": "payment_orders_created_at_idx",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "payment_orders_author_id_authors_author_id_fk": {
          "name": "payment_orders_author_id_authors_author_id_fk",
          "tableFrom": "payment_orders",
          "tableTo": "authors",
          "columnsFrom": [
            "author_id"
          ],
          "columnsTo": [
            "author_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.payments": {
      "name": "payments",
      "schema": "",
      "columns": {
        "payment_id": {
          "name": "payment_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "author_id": {
          "name": "author_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "payment_method_id": {
          "name": "payment_method_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "shipping_code_id": {
          "name": "shipping_code_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "currency": {
          "name": "currency",
          "type": "varchar(3)",
          "primaryKey": false,
          "notNull": true,
          "default": "'usd'"
        },
        "status": {
          "name": "status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "provider_payment_id": {
          "name": "provider_payment_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "payments_author_id_idx": {
          "name": "payments_author_id_idx",
          "columns": [
            {
              "expression": "author_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "payments_status_idx": {
          "name": "payments_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "payments_created_at_idx": {
          "name": "payments_created_at_idx",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "payments_author_id_created_at_idx": {
          "name": "payments_author_id_created_at_idx",
          "columns": [
            {
              "expression": "author_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "payments_author_id_authors_author_id_fk": {
          "name": "payments_author_id_authors_author_id_fk",
          "tableFrom": "payments",
          "tableTo": "authors",
          "columnsFrom": [
            "author_id"
          ],
          "columnsTo": [
            "author_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "payments_payment_method_id_payment_methods_payment_method_id_fk": {
          "name": "payments_payment_method_id_payment_methods_payment_method_id_fk",
          "tableFrom": "payments",
          "tableTo": "payment_methods",
          "columnsFrom": [
            "payment_method_id"
          ],
          "columnsTo": [
            "payment_method_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.shipping_codes": {
      "name": "shipping_codes",
      "schema": "",
      "columns": {
        "shipping_code_id": {
          "name": "shipping_code_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "address_id": {
          "name": "address_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "carrier": {
          "name": "carrier",
          "type": "varchar(120)",
          "primaryKey": false,
          "notNull": false
        },
        "tracking_code": {
          "name": "tracking_code",
          "type": "varchar(120)",
          "primaryKey": false,
          "notNull": true
        },
        "shipped_at": {
          "name": "shipped_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "delivered_at": {
          "name": "delivered_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "shipping_codes_story_id_stories_story_id_fk": {
          "name": "shipping_codes_story_id_stories_story_id_fk",
          "tableFrom": "shipping_codes",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "story_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "shipping_codes_address_id_addresses_address_id_fk": {
          "name": "shipping_codes_address_id_addresses_address_id_fk",
          "tableFrom": "shipping_codes",
          "tableTo": "addresses",
          "columnsFrom": [
            "address_id"
          ],
          "columnsTo": [
            "address_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.author_credit_balances": {
      "name": "author_credit_balances",
      "schema": "",
      "columns": {
        "author_id": {
          "name": "author_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "total_credits": {
          "name": "total_credits",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "last_updated": {
          "name": "last_updated",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "author_credit_balances_author_id_authors_author_id_fk": {
          "name": "author_credit_balances_author_id_authors_author_id_fk",
          "tableFrom": "author_credit_balances",
          "tableTo": "authors",
          "columnsFrom": [
            "author_id"
          ],
          "columnsTo": [
            "author_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.credit_ledger": {
      "name": "credit_ledger",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "author_id": {
          "name": "author_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "credit_event_type": {
          "name": "credit_event_type",
          "type": "credit_event_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "purchase_id": {
          "name": "purchase_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "credit_ledger_author_id_idx": {
          "name": "credit_ledger_author_id_idx",
          "columns": [
            {
              "expression": "author_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "credit_ledger_author_id_created_at_idx": {
          "name": "credit_ledger_author_id_created_at_idx",
          "columns": [
            {
              "expression": "author_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "credit_ledger_event_type_idx": {
          "name": "credit_ledger_event_type_idx",
          "columns": [
            {
              "expression": "credit_event_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "credit_ledger_created_at_idx": {
          "name": "credit_ledger_created_at_idx",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "credit_ledger_story_id_idx": {
          "name": "credit_ledger_story_id_idx",
          "columns": [
            {
              "expression": "story_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"credit_ledger\".\"story_id\" is not null",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "credit_ledger_author_id_authors_author_id_fk": {
          "name": "credit_ledger_author_id_authors_author_id_fk",
          "tableFrom": "credit_ledger",
          "tableTo": "authors",
          "columnsFrom": [
            "author_id"
          ],
          "columnsTo": [
            "author_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "credit_ledger_story_id_stories_story_id_fk": {
          "name": "credit_ledger_story_id_stories_story_id_fk",
          "tableFrom": "credit_ledger",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "story_id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.credit_packages": {
      "name": "credit_packages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "credits": {
          "name": "credits",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "price": {
          "name": "price",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "popular": {
          "name": "popular",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "best_value": {
          "name": "best_value",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "icon": {
          "name": "icon",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'FaShoppingCart'"
        },
        "key": {
          "name": "key",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "credit_packages_key_unique": {
          "name": "credit_packages_key_unique",
          "nullsNotDistinct": false,
          "columns": [
            "key"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.pricing": {
      "name": "pricing",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "service_code": {
          "name": "service_code",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "credits": {
          "name": "credits",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "pricing_service_code_unique": {
          "name": "pricing_service_code_unique",
          "nullsNotDistinct": false,
          "columns": [
            "service_code"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.story_ratings": {
      "name": "story_ratings",
      "schema": "",
      "columns": {
        "rating_id": {
          "name": "rating_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "rating": {
          "name": "rating",
          "type": "story_rating",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "feedback": {
          "name": "feedback",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_anonymous": {
          "name": "is_anonymous",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "include_name_in_feedback": {
          "name": "include_name_in_feedback",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "story_ratings_story_id_stories_story_id_fk": {
          "name": "story_ratings_story_id_stories_story_id_fk",
          "tableFrom": "story_ratings",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "story_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "story_ratings_user_id_authors_author_id_fk": {
          "name": "story_ratings_user_id_authors_author_id_fk",
          "tableFrom": "story_ratings",
          "tableTo": "authors",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "author_id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.print_providers": {
      "name": "print_providers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "varchar(120)",
          "primaryKey": false,
          "notNull": true
        },
        "company_name": {
          "name": "company_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "vat_number": {
          "name": "vat_number",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "email_address": {
          "name": "email_address",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "phone_number": {
          "name": "phone_number",
          "type": "varchar(30)",
          "primaryKey": false,
          "notNull": false
        },
        "address": {
          "name": "address",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "postal_code": {
          "name": "postal_code",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "city": {
          "name": "city",
          "type": "varchar(120)",
          "primaryKey": false,
          "notNull": true
        },
        "country": {
          "name": "country",
          "type": "varchar(2)",
          "primaryKey": false,
          "notNull": true
        },
        "prices": {
          "name": "prices",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "integration": {
          "name": "integration",
          "type": "print_provider_integration",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'email'"
        },
        "available_countries": {
          "name": "available_countries",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.print_requests": {
      "name": "print_requests",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "author_id": {
          "name": "author_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "pdf_url": {
          "name": "pdf_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "print_request_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'requested'"
        },
        "shipping_id": {
          "name": "shipping_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "print_provider_id": {
          "name": "print_provider_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "printing_options": {
          "name": "printing_options",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "requested_at": {
          "name": "requested_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "printed_at": {
          "name": "printed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "print_requests_shipping_id_addresses_address_id_fk": {
          "name": "print_requests_shipping_id_addresses_address_id_fk",
          "tableFrom": "print_requests",
          "tableTo": "addresses",
          "columnsFrom": [
            "shipping_id"
          ],
          "columnsTo": [
            "address_id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "print_requests_print_provider_id_print_providers_id_fk": {
          "name": "print_requests_print_provider_id_print_providers_id_fk",
          "tableFrom": "print_requests",
          "tableTo": "print_providers",
          "columnsFrom": [
            "print_provider_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.ai_edits": {
      "name": "ai_edits",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "author_id": {
          "name": "author_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "requested_at": {
          "name": "requested_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "ai_edits_author_id_idx": {
          "name": "ai_edits_author_id_idx",
          "columns": [
            {
              "expression": "author_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ai_edits_action_idx": {
          "name": "ai_edits_action_idx",
          "columns": [
            {
              "expression": "action",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ai_edits_author_action_idx": {
          "name": "ai_edits_author_action_idx",
          "columns": [
            {
              "expression": "author_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "action",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "ai_edits_author_id_authors_author_id_fk": {
          "name": "ai_edits_author_id_authors_author_id_fk",
          "tableFrom": "ai_edits",
          "tableTo": "authors",
          "columnsFrom": [
            "author_id"
          ],
          "columnsTo": [
            "author_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "ai_edits_story_id_stories_story_id_fk": {
          "name": "ai_edits_story_id_stories_story_id_fk",
          "tableFrom": "ai_edits",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "story_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.promotion_code_redemptions": {
      "name": "promotion_code_redemptions",
      "schema": "",
      "columns": {
        "promotion_code_redemption_id": {
          "name": "promotion_code_redemption_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "promotion_code_id": {
          "name": "promotion_code_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "author_id": {
          "name": "author_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "redeemed_at": {
          "name": "redeemed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "credits_granted": {
          "name": "credits_granted",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "credit_ledger_entry_id": {
          "name": "credit_ledger_entry_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "promotion_code_redemptions_code_idx": {
          "name": "promotion_code_redemptions_code_idx",
          "columns": [
            {
              "expression": "promotion_code_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "promotion_code_redemptions_author_idx": {
          "name": "promotion_code_redemptions_author_idx",
          "columns": [
            {
              "expression": "author_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "promotion_code_redemptions_promotion_code_id_promotion_codes_promotion_code_id_fk": {
          "name": "promotion_code_redemptions_promotion_code_id_promotion_codes_promotion_code_id_fk",
          "tableFrom": "promotion_code_redemptions",
          "tableTo": "promotion_codes",
          "columnsFrom": [
            "promotion_code_id"
          ],
          "columnsTo": [
            "promotion_code_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "promotion_code_redemptions_author_id_authors_author_id_fk": {
          "name": "promotion_code_redemptions_author_id_authors_author_id_fk",
          "tableFrom": "promotion_code_redemptions",
          "tableTo": "authors",
          "columnsFrom": [
            "author_id"
          ],
          "columnsTo": [
            "author_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.promotion_codes": {
      "name": "promotion_codes",
      "schema": "",
      "columns": {
        "promotion_code_id": {
          "name": "promotion_code_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "code": {
          "name": "code",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'partner'"
        },
        "credit_amount": {
          "name": "credit_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "max_global_redemptions": {
          "name": "max_global_redemptions",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "max_redemptions_per_user": {
          "name": "max_redemptions_per_user",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "valid_from": {
          "name": "valid_from",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "valid_until": {
          "name": "valid_until",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "referrer_author_id": {
          "name": "referrer_author_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "active": {
          "name": "active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "promotion_codes_referrer_author_id_authors_author_id_fk": {
          "name": "promotion_codes_referrer_author_id_authors_author_id_fk",
          "tableFrom": "promotion_codes",
          "tableTo": "authors",
          "columnsFrom": [
            "referrer_author_id"
          ],
          "columnsTo": [
            "author_id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "promotion_codes_code_unique": {
          "name": "promotion_codes_code_unique",
          "nullsNotDistinct": false,
          "columns": [
            "code"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.leads": {
      "name": "leads",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "mobile_phone": {
          "name": "mobile_phone",
          "type": "varchar(30)",
          "primaryKey": false,
          "notNull": false
        },
        "language": {
          "name": "language",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "last_email_sent_at": {
          "name": "last_email_sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "email_status": {
          "name": "email_status",
          "type": "email_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'ready'"
        },
        "last_updated_at": {
          "name": "last_updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "leads_email_idx": {
          "name": "leads_email_idx",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "leads_email_status_idx": {
          "name": "leads_email_status_idx",
          "columns": [
            {
              "expression": "email_status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "leads_last_email_sent_at_idx": {
          "name": "leads_last_email_sent_at_idx",
          "columns": [
            {
              "expression": "last_email_sent_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "leads_status_sent_at_idx": {
          "name": "leads_status_sent_at_idx",
          "columns": [
            {
              "expression": "email_status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "last_email_sent_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "leads_email_unique": {
          "name": "leads_email_unique",
          "nullsNotDistinct": false,
          "columns": [
            "email"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.faq_entries": {
      "name": "faq_entries",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "section_id": {
          "name": "section_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "faq_key": {
          "name": "faq_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "locale": {
          "name": "locale",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "content_mdx": {
          "name": "content_mdx",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "question_sort_order": {
          "name": "question_sort_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "is_published": {
          "name": "is_published",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "faq_entries_faq_key_locale_idx": {
          "name": "faq_entries_faq_key_locale_idx",
          "columns": [
            {
              "expression": "faq_key",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "locale",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "faq_entries_locale_section_sort_idx": {
          "name": "faq_entries_locale_section_sort_idx",
          "columns": [
            {
              "expression": "locale",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "section_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "question_sort_order",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "faq_entries_section_id_idx": {
          "name": "faq_entries_section_id_idx",
          "columns": [
            {
              "expression": "section_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "faq_entries_locale_idx": {
          "name": "faq_entries_locale_idx",
          "columns": [
            {
              "expression": "locale",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "faq_entries_faq_key_idx": {
          "name": "faq_entries_faq_key_idx",
          "columns": [
            {
              "expression": "faq_key",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "faq_entries_is_published_idx": {
          "name": "faq_entries_is_published_idx",
          "columns": [
            {
              "expression": "is_published",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "faq_entries_title_search_idx": {
          "name": "faq_entries_title_search_idx",
          "columns": [
            {
              "expression": "to_tsvector('english', \"title\")",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "faq_entries_content_search_idx": {
          "name": "faq_entries_content_search_idx",
          "columns": [
            {
              "expression": "to_tsvector('english', \"content_mdx\")",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        }
      },
      "foreignKeys": {
        "faq_entries_section_id_faq_sections_id_fk": {
          "name": "faq_entries_section_id_faq_sections_id_fk",
          "tableFrom": "faq_entries",
          "tableTo": "faq_sections",
          "columnsFrom": [
            "section_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.faq_sections": {
      "name": "faq_sections",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "section_key": {
          "name": "section_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "default_label": {
          "name": "default_label",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "icon_name": {
          "name": "icon_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sort_order": {
          "name": "sort_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "faq_sections_section_key_idx": {
          "name": "faq_sections_section_key_idx",
          "columns": [
            {
              "expression": "section_key",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "faq_sections_sort_order_idx": {
          "name": "faq_sections_sort_order_idx",
          "columns": [
            {
              "expression": "sort_order",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "faq_sections_is_active_idx": {
          "name": "faq_sections_is_active_idx",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "faq_sections_section_key_unique": {
          "name": "faq_sections_section_key_unique",
          "nullsNotDistinct": false,
          "columns": [
            "section_key"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.access_level": {
      "name": "access_level",
      "schema": "public",
      "values": [
        "view",
        "edit"
      ]
    },
    "public.address_type": {
      "name": "address_type",
      "schema": "public",
      "values": [
        "billing",
        "delivery"
      ]
    },
    "public.ai_action_type": {
      "name": "ai_action_type",
      "schema": "public",
      "values": [
        "story_structure",
        "story_outline",
        "chapter_writing",
        "image_generation",
        "image_edit",
        "story_review",
        "character_generation",
        "story_enhancement",
        "audio_generation",
        "content_validation",
        "test"
      ]
    },
    "public.audience_for_stories": {
      "name": "audience_for_stories",
      "schema": "public",
      "values": [
        "my_child",
        "family_member",
        "friend_group",
        "myself",
        "a_friend",
        "varies"
      ]
    },
    "public.audiobook_status": {
      "name": "audiobook_status",
      "schema": "public",
      "values": [
        "generating",
        "completed",
        "failed"
      ]
    },
    "public.character_age": {
      "name": "character_age",
      "schema": "public",
      "values": [
        "infant",
        "toddler",
        "preschool",
        "school_age",
        "teenage",
        "emerging_adult",
        "seasoned_adult",
        "midlife_mentor",
        "elder",
        "youngling",
        "adult",
        "senior"
      ]
    },
    "public.character_role": {
      "name": "character_role",
      "schema": "public",
      "values": [
        "protagonist",
        "antagonist",
        "supporting",
        "mentor",
        "comic_relief",
        "love_interest",
        "sidekick",
        "narrator",
        "other"
      ]
    },
    "public.character_trait": {
      "name": "character_trait",
      "schema": "public",
      "values": [
        "adaptable",
        "brave",
        "compassionate",
        "courageous",
        "curious",
        "decisive",
        "empathetic",
        "generous",
        "honest",
        "imaginative",
        "loyal",
        "optimistic",
        "patient",
        "practical",
        "pragmatic",
        "resourceful",
        "self-disciplined",
        "sincere",
        "witty",
        "kind",
        "conscientious",
        "energetic",
        "arrogant",
        "callous",
        "cowardly",
        "cynical",
        "deceitful",
        "impulsive",
        "jealous",
        "lazy",
        "manipulative",
        "moody",
        "reckless",
        "selfish",
        "vengeful",
        "aloof",
        "blunt",
        "cautious",
        "methodical"
      ]
    },
    "public.collaborator_role": {
      "name": "collaborator_role",
      "schema": "public",
      "values": [
        "editor",
        "viewer"
      ]
    },
    "public.credit_event_type": {
      "name": "credit_event_type",
      "schema": "public",
      "values": [
        "initialCredit",
        "creditPurchase",
        "eBookGeneration",
        "audioBookGeneration",
        "printOrder",
        "selfPrinting",
        "refund",
        "voucher",
        "promotion",
        "textEdit",
        "imageEdit"
      ]
    },
    "public.gender": {
      "name": "gender",
      "schema": "public",
      "values": [
        "female",
        "male",
        "prefer_not_to_say"
      ]
    },
    "public.graphical_style": {
      "name": "graphical_style",
      "schema": "public",
      "values": [
        "cartoon",
        "realistic",
        "watercolor",
        "digital_art",
        "hand_drawn",
        "minimalist",
        "vintage",
        "comic_book",
        "anime",
        "pixar_style",
        "disney_style",
        "sketch",
        "oil_painting",
        "colored_pencil"
      ]
    },
    "public.literary_age": {
      "name": "literary_age",
      "schema": "public",
      "values": [
        "school_age",
        "teen",
        "emerging_adult",
        "experienced_adult",
        "midlife_mentor_or_elder"
      ]
    },
    "public.literary_persona": {
      "name": "literary_persona",
      "schema": "public",
      "values": [
        "storyteller",
        "adventurous-narrator",
        "fun-reporter",
        "friendly-educator",
        "institutional-chronicler",
        "pub-buddy-narrator"
      ]
    },
    "public.notification_preference": {
      "name": "notification_preference",
      "schema": "public",
      "values": [
        "essential",
        "inspiration",
        "news"
      ]
    },
    "public.novel_style": {
      "name": "novel_style",
      "schema": "public",
      "values": [
        "adventure",
        "fantasy",
        "mystery",
        "romance",
        "science_fiction",
        "historical",
        "contemporary",
        "fairy_tale",
        "comedy",
        "drama",
        "horror",
        "thriller",
        "biography",
        "educational",
        "poetry",
        "sports_adventure"
      ]
    },
    "public.payment_event_type": {
      "name": "payment_event_type",
      "schema": "public",
      "values": [
        "order_created",
        "order_updated",
        "payment_initiated",
        "payment_completed",
        "payment_failed",
        "payment_cancelled",
        "webhook_received",
        "credits_added",
        "refund_initiated",
        "refund_completed"
      ]
    },
    "public.payment_method_type": {
      "name": "payment_method_type",
      "schema": "public",
      "values": [
        "card",
        "revolut_pay",
        "apple_pay",
        "google_pay"
      ]
    },
    "public.payment_order_status": {
      "name": "payment_order_status",
      "schema": "public",
      "values": [
        "pending",
        "processing",
        "completed",
        "failed",
        "cancelled",
        "expired"
      ]
    },
    "public.payment_provider": {
      "name": "payment_provider",
      "schema": "public",
      "values": [
        "stripe",
        "paypal",
        "revolut",
        "other"
      ]
    },
    "public.payment_status": {
      "name": "payment_status",
      "schema": "public",
      "values": [
        "pending",
        "processing",
        "completed",
        "failed",
        "cancelled",
        "expired"
      ]
    },
    "public.primary_goal": {
      "name": "primary_goal",
      "schema": "public",
      "values": [
        "family_keepsake",
        "personalized_gift",
        "child_development",
        "fun_and_creativity",
        "friend_group_memories",
        "company_engagement",
        "other"
      ]
    },
    "public.print_provider_integration": {
      "name": "print_provider_integration",
      "schema": "public",
      "values": [
        "email",
        "api"
      ]
    },
    "public.print_request_status": {
      "name": "print_request_status",
      "schema": "public",
      "values": [
        "requested",
        "in_printing",
        "packing",
        "shipped",
        "delivered",
        "cancelled",
        "error"
      ]
    },
    "public.run_status": {
      "name": "run_status",
      "schema": "public",
      "values": [
        "queued",
        "running",
        "failed",
        "completed",
        "cancelled"
      ]
    },
    "public.story_rating": {
      "name": "story_rating",
      "schema": "public",
      "values": [
        "1",
        "2",
        "3",
        "4",
        "5"
      ]
    },
    "public.story_status": {
      "name": "story_status",
      "schema": "public",
      "values": [
        "temporary",
        "draft",
        "writing",
        "published"
      ]
    },
    "public.target_audience": {
      "name": "target_audience",
      "schema": "public",
      "values": [
        "children_0-2",
        "children_3-6",
        "children_7-10",
        "children_11-14",
        "young_adult_15-17",
        "adult_18+",
        "all_ages"
      ]
    },
    "public.transaction_type": {
      "name": "transaction_type",
      "schema": "public",
      "values": [
        "purchase",
        "bonus",
        "refund"
      ]
    },
    "public.blog_status": {
      "name": "blog_status",
      "schema": "public",
      "values": [
        "draft",
        "published",
        "archived"
      ]
    },
    "public.email_status": {
      "name": "email_status",
      "schema": "public",
      "values": [
        "ready",
        "sent",
        "open",
        "click",
        "soft_bounce",
        "hard_bounce",
        "unsub"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}